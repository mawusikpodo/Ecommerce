(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{23:function(e,a,t){e.exports=t(35)},28:function(e,a,t){},35:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(19),c=t.n(s),l=(t(28),t(20)),i=t(9),o=t(10),m=t(11),u=t(12),d=t(6),p=t(7),h=t(5),v=n.a.createContext({}),E=function(e){var a=function(a){return n.a.createElement(v.Consumer,null,(function(t){return n.a.createElement(e,Object.assign({},a,{context:t}))}))};return a.WrappedComponent=e,a},b=E(function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(i.a)(this,t),(r=a.call(this,e)).handleChange=function(e){var a;return r.setState((a={},Object(h.a)(a,e.target.name,e.target.value),Object(h.a)(a,"error",""),a))},r.login=function(){var e=r.state,a=e.username,t=e.password;if(!a||!t)return r.setState({error:"Fill all fields!"});r.props.context.login(a,t)||r.setState({error:"Invalid Credentails"})},r.state={username:"",password:""},r}return Object(o.a)(t,[{key:"render",value:function(){return this.props.context.user?n.a.createElement(p.a,{to:"/products"}):n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"hero is-primary "},n.a.createElement("div",{className:"hero-body container"},n.a.createElement("h4",{className:"title"},"Login"))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",{className:"columns is-mobile is-centered"},n.a.createElement("div",{className:"column is-one-third"},n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"User Name: "),n.a.createElement("input",{className:"input",type:"text",name:"username",onChange:this.handleChange})),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Password: "),n.a.createElement("input",{className:"input",type:"password",name:"password",onChange:this.handleChange})),this.state.error&&n.a.createElement("div",{className:"has-text-danger"},this.state.error),n.a.createElement("div",{className:"field is-clearfix"},n.a.createElement("button",{className:"button is-primary is-outlined is-pulled-right",onClick:this.login},"Submit")))))}}]),t}(r.Component)),g=function(e){var a=e.product;return n.a.createElement("div",{className:" column is-half"},n.a.createElement("div",{className:"box"},n.a.createElement("div",{className:"media"},n.a.createElement("div",{className:"media-left"},n.a.createElement("figure",{className:"image is-64x64"},n.a.createElement("img",{src:"https://bulma.io/images/placeholders/128x128.png",alt:"product"}))),n.a.createElement("div",{className:"media-content"},n.a.createElement("b",{style:{textTransform:"capitalize"}},a.name," ",n.a.createElement("span",{className:"tag is-primary"},"$",a.price)),n.a.createElement("div",null,a.shortDesc),a.stock>0?n.a.createElement("small",null,a.stock+" Available"):n.a.createElement("small",{className:"has-text-danger"},"Out Of Stock"),n.a.createElement("div",{className:"is-clearfix"},n.a.createElement("button",{className:"button is-small is-outlined is-primary   is-pulled-right",onClick:function(){return e.addToCart({id:a.name,product:a,amount:1})}},"Add to Cart"))))))},N=E((function(e){var a=e.context.products;return n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"hero is-primary"},n.a.createElement("div",{className:"hero-body container"},n.a.createElement("h4",{className:"title"},"Our Products"))),n.a.createElement("br",null),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"column columns is-multiline"},a&&a.length?a.map((function(a,t){return n.a.createElement(g,{product:a,key:t,addToCart:e.context.addToCart})})):n.a.createElement("div",{className:"column"},n.a.createElement("span",{className:"title has-text-grey-light"},"No product found!")))))})),f={name:"",price:"",stock:"",shortDesc:"",description:""},C=E(function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(i.a)(this,t),(r=a.call(this,e)).save=function(e){e.preventDefault();var a=r.state,t=a.name,n=a.price,s=a.stock,c=a.shortDesc,l=a.description;t&&n?r.props.context.addProduct({name:t,price:n,shortDesc:c,description:l,stock:s||0},(function(){return r.setState(f)})):r.setState({error:"Please Enter name and price"})},r.handleChange=function(e){var a;return r.setState((a={},Object(h.a)(a,e.target.name,e.target.value),Object(h.a)(a,"error",""),a))},r.state=f,r}return Object(o.a)(t,[{key:"render",value:function(){var e=this.state,a=e.name,t=e.price,s=e.stock,c=e.shortDesc,l=e.description,i=this.props.context.user;return i&&i.accessLevel<1?n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"hero is-primary "},n.a.createElement("div",{className:"hero-body container"},n.a.createElement("h4",{className:"title"},"Login"))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("form",{onSubmit:this.save},n.a.createElement("div",{className:"columns is-mobile is-centered"},n.a.createElement("div",{className:"column is-one-third"},n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Product Name: "),n.a.createElement("input",{className:"input",type:"text",name:"name",value:a,onChange:this.handleChange,required:!0})),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Price: "),n.a.createElement("input",{className:"input",type:"number",name:"price",value:t,onChange:this.handleChange,required:!0})),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Available in Stock: "),n.a.createElement("input",{className:"input",type:"number",name:"stock",value:s,onChange:this.handleChange})),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Short Description: "),n.a.createElement("input",{className:"input",type:"text",name:"shortDesc",value:c,onChange:this.handleChange})),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Description: "),n.a.createElement("textarea",{className:"textarea",type:"text",rows:"2",style:{resize:"none"},name:"description",value:l,onChange:this.handleChange})),this.state.error&&n.a.createElement("div",{className:"error"},this.state.error),n.a.createElement("div",{className:"field is-clearfix"},n.a.createElement("button",{className:"button is-primary is-outlined is-pulled-right",type:"submit",onClick:this.save},"Submit")))))):n.a.createElement(p.a,{to:"/"})}}]),t}(r.Component)),y=function(e){var a=e.cartItem,t=e.cartKey,r=a.product,s=a.amount;return n.a.createElement("div",{className:" column is-half"},n.a.createElement("div",{className:"box"},n.a.createElement("div",{className:"media"},n.a.createElement("div",{className:"media-left"},n.a.createElement("figure",{className:"image is-64x64"},n.a.createElement("img",{src:"https://bulma.io/images/placeholders/128x128.png",alt:"product"}))),n.a.createElement("div",{className:"media-content"},n.a.createElement("b",{style:{textTransform:"capitalize"}},r.name," ",n.a.createElement("span",{className:"tag is-primary"},"$",r.price)),n.a.createElement("div",null,r.shortDesc),n.a.createElement("small",null,"".concat(s," in cart"))),n.a.createElement("div",{className:"media-right",onClick:function(){return e.removeFromCart(t)}},n.a.createElement("span",{className:"delete is-large"})))))},x=E((function(e){var a=e.context.cart,t=Object.keys(a||{});return n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"hero is-primary"},n.a.createElement("div",{className:"hero-body container"},n.a.createElement("h4",{className:"title"},"My Cart"))),n.a.createElement("br",null),n.a.createElement("div",{className:"container"},t.length?n.a.createElement("div",{className:"column columns is-multiline"},t.map((function(t){return n.a.createElement(y,{cartKey:t,key:t,cartItem:a[t],removeFromCart:e.context.removeFromCart})})),n.a.createElement("div",{className:"column is-12 is-clearfix"},n.a.createElement("br",null),n.a.createElement("div",{className:"is-pulled-right"},n.a.createElement("button",{onClick:e.context.clearCart,className:"button is-warning "},"Clear cart")," ",n.a.createElement("button",{className:"button is-success",onClick:e.context.checkout},"Checkout")))):n.a.createElement("div",{className:"column"},n.a.createElement("div",{className:"title has-text-grey-light"},"No item in cart!"))))})),k={users:[{username:"regular",accessLevel:1,password:"password"},{username:"admin",accessLevel:0,password:"password"}],initProducts:[{name:"shoes",stock:10,price:399.99,shortDesc:"Nulla facilisi. Curabitur at lacus ac velit ornare lobortis.",description:"Cras sagittis. Praesent nec nisl a purus blandit viverra. Ut leo. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Fusce a quam."},{name:"bags",stock:20,price:299.99,shortDesc:"Nulla facilisi. Curabitur at lacus ac velit ornare lobortis.",description:"Cras sagittis. Praesent nec nisl a purus blandit viverra. Ut leo. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Fusce a quam."},{name:"shirts",stock:15,price:149.99,shortDesc:"Nulla facilisi. Curabitur at lacus ac velit ornare lobortis.",description:"Cras sagittis. Praesent nec nisl a purus blandit viverra. Ut leo. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Fusce a quam."},{name:"shorts",stock:5,price:109.99,shortDesc:"Nulla facilisi. Curabitur at lacus ac velit ornare lobortis.",description:"Cras sagittis. Praesent nec nisl a purus blandit viverra. Ut leo. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Fusce a quam."}]},S=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(i.a)(this,t),(r=a.call(this,e)).login=function(e,a){var t=k.users.find((function(t){return t.username===e&&t.password===a}));return!!t&&(r.setState({user:t}),localStorage.setItem("user",JSON.stringify(t)),!0)},r.logout=function(e){e.preventDefault(),r.setState({user:null}),localStorage.removeItem("user")},r.addProduct=function(e,a){var t=r.state.products.slice();t.push(e),localStorage.setItem("products",JSON.stringify(t)),r.setState({products:t},(function(){return a&&a()}))},r.addToCart=function(e){var a=r.state.cart;a[e.id]?a[e.id].amount+=e.amount:a[e.id]=e,a[e.id].amount>a[e.id].product.stock&&(a[e.id].amount=a[e.id].product.stock),localStorage.setItem("cart",JSON.stringify(a)),r.setState({cart:a})},r.checkout=function(){if(r.state.user){var e=r.state.cart,a=r.state.products.map((function(a){return e[a.name]&&(a.stock=a.stock-e[a.name].amount),a}));r.setState({products:a}),r.clearCart()}else r.routerRef.current.history.push("/login")},r.removeFromCart=function(e){var a=r.state.cart;delete a[e],localStorage.setItem("cart",JSON.stringify(a)),r.setState({cart:a})},r.clearCart=function(){var e={};localStorage.setItem("cart",JSON.stringify(e)),r.setState({cart:e})},r.state={user:null,cart:{},products:[]},r.routerRef=n.a.createRef(),r}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("products"),a=localStorage.getItem("cart"),t=localStorage.getItem("user");e=e?JSON.parse(e):k.initProducts,a=a?JSON.parse(a):{},t=t?JSON.parse(t):null,this.setState({products:e,user:t,cart:a})}},{key:"render",value:function(){var e=this;return n.a.createElement(v.Provider,{value:Object(l.a)({},this.state,{removeFromCart:this.removeFromCart,addToCart:this.addToCart,login:this.login,addProduct:this.addProduct,clearCart:this.clearCart,checkout:this.checkout})},n.a.createElement(d.a,{ref:this.routerRef},n.a.createElement("div",{className:"App"},n.a.createElement("nav",{className:"navbar container",role:"navigation","aria-label":"main navigation"},n.a.createElement("div",{className:"navbar-brand"},n.a.createElement("b",{className:"navbar-item is-size-4 "},"MarKet.com"),n.a.createElement("a",{href:"/",role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:function(a){a.preventDefault(),e.setState({showMenu:!e.state.showMenu})}},n.a.createElement("span",{"aria-hidden":"true"}),n.a.createElement("span",{"aria-hidden":"true"}),n.a.createElement("span",{"aria-hidden":"true"}))),n.a.createElement("div",{className:"navbar-menu ".concat(this.state.showMenu?"is-active":"")},n.a.createElement(d.b,{to:"/products",className:"navbar-item"},"Products"),this.state.user&&this.state.user.accessLevel<1&&n.a.createElement(d.b,{to:"/add-product",className:"navbar-item"},"Add Product"),n.a.createElement(d.b,{to:"/cart",className:"navbar-item"},"Cart",n.a.createElement("span",{className:"tag is-primary",style:{marginLeft:"5px"}},Object.keys(this.state.cart).length)),this.state.user?n.a.createElement("a",{href:"/",className:"navbar-item",onClick:this.logout},"Logout"):n.a.createElement(d.b,{to:"/login",className:"navbar-item"},"Login"))),n.a.createElement(p.d,null,n.a.createElement(p.b,{exact:!0,path:"/",component:N}),n.a.createElement(p.b,{exact:!0,path:"/login",component:b}),n.a.createElement(p.b,{exact:!0,path:"/cart",component:x}),n.a.createElement(p.b,{exact:!0,path:"/add-product",component:C}),n.a.createElement(p.b,{exact:!0,path:"/products",component:N})))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(34);c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.55c0101f.chunk.js.map